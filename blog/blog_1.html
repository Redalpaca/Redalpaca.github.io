<html><head>
    <meta charset="utf-8">
    <title>Redalpaca's site</title>
    <!-- <link rel="stylesheet" href="./css/style.css"> -->
    <link rel="stylesheet" href="../css/markdown.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="shortcut icon" href="../img/icon/avatar.png" type="image/x-icon">
    <script>
      
    </script>
  </head>
  <body for="html-export">
    <!-- <script src="./js/general.js"></script> -->
    <div class="header">
      <div class="left-container">
        <div class="avatar">
          <img class="avatar" src="../img/icon/avatar.png" alt="test" width="45">
        </div>
        <div class="header-title">
          <h2>Redalpaca's Blog</h2>
          <p>HiğŸ‘‹, welcome to alpaca land.</p>
        </div>
      </div>
      <div class="right-container">
        <h3 class="link" id="link-github">
          <a href="https://github.com/Redalpaca">Github</a>
        </h3>
        <h3 class="link" id="link-page">
          <a href="../index.html">Page</a>
        </h3>
        <h3 class="link" id="link-alpaca">
          <a href="../img/icon/alpaca.jpg">Alpaca</a>
        </h3>
      </div>
      
        
    </div>

    <!-- Here is the markdown content -->
    <!-- Here is the markdown content -->
    <!-- Here is the markdown content -->
    <!-- Here is the markdown content -->
    <!-- Here is the markdown content -->
    <div class="crossnote markdown-preview  ">
      <h1 class="crossnote-header" id="title">UL HARQ note</h1>
      <h2 class="crossnote-header" id="questions">QUESTIONSï¼š</h2>

<p>åœ¨ uesim ä¾§ï¼Œä»€ä¹ˆä½œä¸º HARQ info çš„å‚ç…§æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿ</p>
<h4 class="crossnote-header" id="uesim_checker-%E7%9A%84-harqinfo">uesim_checker çš„ harqinfo</h4>

<pre data-role="codeBlock" data-info="c++" class="language-cpp c++"><code><span class="token keyword keyword-typedef">typedef</span> <span class="token keyword keyword-struct">struct</span> <span class="token class-name">_HARQ_INFO_</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-uint32_t">uint32_t</span> mcs<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint16_t">uint16_t</span> rbSize<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>  numSym<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>  ndi<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>  rv<span class="token punctuation">;</span>
    CrcState crc<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint16_t">uint16_t</span> sfn<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint16_t">uint16_t</span> slot<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>  nackCnt<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>  payLoad<span class="token punctuation">[</span>MIN_TB_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> sHarqInfo<span class="token punctuation">,</span> <span class="token operator">*</span>PHarqInfo<span class="token punctuation">;</span> 
</code></pre><h4 class="crossnote-header" id="l2-%E4%BE%A7%E7%9A%84-pharqprocinfo">l2 ä¾§çš„ PHarqProcInfo</h4>

<pre data-role="codeBlock" data-info="c++" class="language-cpp c++"><code><span class="token keyword keyword-typedef">typedef</span> <span class="token keyword keyword-struct">struct</span> <span class="token class-name">_HARQ_PROC_INFO_</span>
<span class="token punctuation">{</span>
    HarqState harqState         <span class="token operator">=</span> ACK<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>   retransCnt        <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>   ndi               <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-uint16_t">uint16_t</span>  idxInCellHarqList <span class="token operator">=</span> MAX_UL_HARQ_PROC_COUNT<span class="token punctuation">;</span>
<span class="token punctuation">}</span> sHarqProcInfo<span class="token punctuation">,</span> <span class="token operator">*</span>PHarqProcInfo<span class="token punctuation">;</span>

<span class="token keyword keyword-typedef">typedef</span> <span class="token keyword keyword-struct">struct</span> <span class="token class-name">_HARQ_INFO_</span>
<span class="token punctuation">{</span>
    sHarqProcInfo procInfo<span class="token punctuation">[</span>MAX_UL_HARQ_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> sHarqInfo<span class="token punctuation">,</span> <span class="token operator">*</span>PHarqInfo<span class="token punctuation">;</span> 
</code></pre><h4 class="crossnote-header" id="l2-%E4%BE%A7%E7%9A%84-pharqschedinfo">l2 ä¾§çš„ PHarqSchedInfo</h4>

<pre data-role="codeBlock" data-info="C++" class="language-cpp C++"><code><span class="token keyword keyword-typedef">typedef</span> <span class="token keyword keyword-struct">struct</span> <span class="token class-name">_HARQ_SCHED_INFO_</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-uint32_t">uint32_t</span>         tbSize<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint16_t">uint16_t</span>         ueIndex<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint16_t">uint16_t</span>         rbSize<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>          harqId<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>          lchId<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>          timeDomainIndex<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>          mcsIndex<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>          ndi<span class="token punctuation">;</span>
    <span class="token keyword keyword-uint8_t">uint8_t</span>          rv<span class="token punctuation">;</span>
    <span class="token keyword keyword-struct">struct</span> <span class="token class-name">rte_mbuf</span><span class="token operator">*</span> pTb<span class="token punctuation">;</span>
<span class="token punctuation">}</span> sHarqSchedInfo<span class="token punctuation">,</span> <span class="token operator">*</span>PHarqSchedInfo<span class="token punctuation">;</span>
</code></pre><h2 class="crossnote-header" id="uesim-harq-%E7%9B%B8%E5%85%B3%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B">uesim HARQ ç›¸å…³æ¶ˆæ¯å¤„ç†æµç¨‹</h2>

<ul>
<li>uesim_api_rx_proc_handle_queue æ”¶å– L2 å‘æ¥çš„æ¶ˆæ¯</li>
<li>Handle UL-DCIï¼š
<ul>
<li>decode UL-DCI (treat as DCI format)</li>
<li>æŠŠæœ‰æ•ˆæ¶ˆæ¯ä¿å­˜åœ¨ UEcontext -&gt; HARQ info é‡Œ ï¼ˆå¯¹äºåŒä¸€ä¸ª UE çš„åŒä¸€æ¬¡è°ƒåº¦ï¼‰</li>
</ul>
</li>
<li>Handle UL-configï¼š
<ul>
<li>CRC indï¼šå…ˆä» L2 å‘æ¥çš„ CRC PDU ç¡®è®¤ UL åŒ…æœ‰æ²¡æœ‰é—®é¢˜
<ul>
<li>è‹¥æ²¡é—®é¢˜ï¼Œåˆ™ pass</li>
<li>è‹¥æœ‰é—®é¢˜ï¼Œåˆ™å°† UL åŒ…æ”¾å…¥ HARQ buffer ï¼ˆåˆ°å“ªé‡Œå»æ‰¾è¿™ä¸ªåŒ…å‘¢ï¼Ÿè¿˜éœ€è¦åˆ«çš„ bufferï¼‰</li>
</ul>
</li>
<li>ULSCH txï¼šFill ULSCH PDU -&gt; generate mac PDU
<ul>
<li>æ‰“åŒ…æ—¶ï¼Œå…ˆæŸ¥çœ‹ HARQ buffer æœ‰æ— å†…å®¹ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
    <div class="footer">
      <div class="personal-info">
        <p class="email">zhoualpaca@gmail.com</p>
      </div>
    </div>
    <script src="../js/general.js"></script>
  
  </body></html>